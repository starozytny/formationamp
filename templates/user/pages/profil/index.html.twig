{% extends 'user/pages/profil/template.html.twig' %}

{% set page_title %}Mon profil{% endset %}

{% block main_content %}
    {% set agency = obj.agency %}
    <div class="main-content">
        <div class="profil-page">
            <div class="col-1">
                <div class="profil-card">
                    <div class="profil-card-header">
                        <div class="title">{{ app.user.firstname }} {{ app.user.lastname }}</div>
                    </div>
                    <div class="profil-card-body">
                        <div class="items">
                            <div class="item username">#{{ obj.username }}</div>
                            <div class="item title">Informations de contact</div>
                            <div class="item">{{ obj.email }}</div>
                            <div class="item">{{ agency.phone }}</div>
                            <div class="item title">Mot de passe</div>
                            <div class="item">
                                <a href="{{ path('user_profil_update') }}">Modifier son mot de passe</a>
                            </div>
                            <div class="item title">Adresse</div>
                            <div class="item">{{ agency.fullAddress }}</div>
                            <div class="item title">SIREN</div>
                            <div class="item">{{ agency.siren ? agency.siren : "Non communiqué" }}</div>
                            <div class="item title">Garantie</div>
                            <div class="item">{{ agency.garantie ? agency.garantie : "Non communiqué" }}</div>
                            <div class="item title">Type de structure</div>
                            <div class="item">{{ agency.typeString ? agency.typeString : "Non communiqué" }}</div>
                        </div>
                    </div>
                    <div class="profil-card-footer">
                        <a href="{{ path('user_profil_update') }}" class="btn btn-primary">Modifier ses informations</a>
                    </div>
                </div>

                <div class="profil-card">
                    <a href="{{ path('user_my_formations') }}" class="btn btn-primary">Mes formations</a>
{#                    <a href="{{ path('user_my_formations') }}" class="btn btn-primary">Mes académies</a>#}
                </div>
            </div>

            <div class="col-2">
                <div id="profil-banks" data-donnees="{{ banks }}">
                    {% include "dashboard/layout/components/spinner.html.twig" %}
                </div>
                {% if _error is not null and _error == 1 %}
                    <div class="alert alert-danger">
                        <span class="icon-warning"></span>
                        <p>Cette personne est ou a été inscrit à une formation. Vous ne pouvez pas le supprimer.</p>
                    </div>
                {% endif %}
                <div id="profil-teams" data-donnees="{{ teams }}" data-data-archived="{{ teamsArchived }}">
                    {% include "dashboard/layout/components/spinner.html.twig" %}
                </div>
                {% for message in app.flashes('notice_success') %}
                    <div class="flash-notification" data-type="success" data-donnees="{{ message }}"></div>
                {% endfor %}
                {% for message in app.flashes('notice_error') %}
                    <div class="flash-notification" data-type="error" data-donnees="{{ message }}"></div>
                {% endfor %}
                <div id="profil-orders" data-donnees="{{ orders }}">
                    {% include "dashboard/layout/components/spinner.html.twig" %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
